<!DOCTYPE html>
<html lang="en">

	<head>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<title>Parser</title>

        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script src="lodash.js"></script>

        <script>
		$(document).ready(function() {

			$.getJSON('data.json', function(data) {
				parseData(data, $('#full__parsed__data'));
			});

            var labels = {
                fullname :  'Полное наименование',
                shortname : 'Краткое наименование',
                head : 'Руководитель',
                contacts : 'Контакты',
                units : 'Структурные подразделения и подведомственные учреждения',
                address : 'Адрес',
                phone : 'Телефон',
                email : 'Электронная почта',
                website : 'Сайт',
                geo : 'Координаты',
                latitude : 'Широта',
                longitude : 'Долгота'
            };

            function parseData(data, container){
                var result = '<ul>';
                result += parseObject(data);
                container.html(result);
            }

            function parseObject(obj){
                var result = '';
                _.forEach(obj, function(value, key) {
                    if (typeof value == 'string') {
                        result += '<li>'+ labels[key] + ': ' + value + '</li>';
                    } else {
                        result += '<li>' + labels[key];
                        result += '<ul>';
                        if (key == 'units') {
                            _.forEach(value, function(unit, key) {
                                result += parseObject(unit);
                            })
                        } else {
                           result += parseObject(value);
                        }
                        result += '</li></ul>';
                    }
                });
                return result;
           }
		});
		</script>

    </head>

    <body>

        <div id="full__parsed__data"></div>
<!--
        <hr>

        <ul>
            <li>Полное наименование: Администрации Предгорного муниципального района Ставропольского края</li>
            <li>Краткое наименование: Администрация ПМР СК</li>
            <li>Руководитель: Гюльбяков Николай Кирьякович</li>
            <li>Контактная информация:
            <ul>
                <li>Адрес: 357350, Ставропольский край, Предгорный район, ст-ца Ессентукская, ул. Набережная, 5 (<a href="https://maps.yandex.ru/?text=44.031873,42.875122" target="_blank">Показать на карте</a>)</li>
                <li>Телефон: +7 87961 5-12-50</li>
                <li>Электроная почта: <a href="mailto:apmr2006@yandex.ru">apmr2006@yandex.ru</a></li>
                <li>Официальный сайт: <a href="http://www.predgor-ray.ru" target="_blank"> http://www.predgor-ray.ru</a></li>
            </ul>
            </li>
            <li>Структурные подразделения и подведомственные учреждения:
            <ul>
                <li>Полное наименование: Финансовое управление администрации Предгорного муниципального района Ставропольского края</li>
                <li>Краткое наименование: Финансовое управление АПМР СК</li>
                <li>Руководитель: Царикаев Казбек Дзанхотович</li>
                <li>Контактная информация:
                <ul>
                    <li>Адрес: 357350, Ставропольский край, Предгорный район, ст-ца Ессентукская, ул. Гагарина, 160 (<a href="https://maps.yandex.ru/?text=44.028049,42.867086" target="_blank">Показать на карте</a>)</li>
                    <li>Телефон: +7 87961 5-18-92</li>
                    <li>Электроная почта: <a href="mailto:fyapmrck@yandex.ru">fyapmrck@yandex.ru</a></li>
                    <li>Официальный сайт: </li>
                </ul>
                </li>
                <li>Структурные подразделения и подведомственные учреждения:
                <ul>
                    <li>Полное наименование: Муниципальное казенное учреждение &laquo;Многофункциональный центр предоставления государственных и муниципальных услуг Предгорного муниципального района&raquo;</li>
                    <li>Краткое наименование: МКУ &laquo;МФЦ Предгорного муниципального района&raquo;</li>
                    <li>Руководитель: Леонов Игорь Юрьевич</li>
                    <li>Контактная информация:
                    <ul>
                        <li>Адрес: 357350, Ставропольский край, Предгорный район, ст-ца Ессентукская, ул. Гагарина, 100 (<a href="https://maps.yandex.ru/?text=44.030625,42.874068" target="_blank">Показать на карте</a>)</li>
                        <li>Телефон: +7 87961 5-21-25</li>
                        <li>Электроная почта: <a href="mailto:mfcpmr@yandex.ru">mfcpmr@yandex.ru</a></li>
                        <li>Официальный сайт: <a href="http://pmr.umfc26.ru" target="_blank">http://pmr.umfc26.ru</a></li>
                    </ul>
                    </li>
                    <li>Структурные подразделения и подведомственные учреждения:
                    <ul>
                        <li>Полное наименование: Территориально-обособленное структурное подразделение &laquo;Многофункционального центра предоставления государственных и муниципальных услуг Предгорного муниципального района&raquo; станицы Бекешевская</li>
                        <li>Краткое наименование: ТОСП МКУ &laquo;МФЦ Предгорного муниципального района&raquo; станицы Бекешевская</li>
                        <li>Руководитель:</li>
                        <li>Контактная информация:
                        <ul>
                            <li>Адрес: 000000, Ставропольский край, Предгорный район, ст-ца Бекешевская, ул. Московская, 9 (<a href="https://maps.yandex.ru/?text=00.000000,00.000000" target="_blank">Показать на карте</a>)</li>
                            <li>Телефон: +7 87961 4-12-05</li>
                            <li>Электроная почта: </li>
                            <li>Официальный сайт: </li>
                        </ul>
                        </li>
                        <li>Полное наименование: Территориально-обособленное структурное подразделение &laquo;Многофункционального центра предоставления государственных и муниципальных услуг Предгорного муниципального района&raquo; станицы Бекешевская</li>
                        <li>Краткое наименование: ТОСП МКУ &laquo;МФЦ Предгорного муниципального района&raquo; станицы Бекешевская</li>
                        <li>Руководитель:</li>
                        <li>Контактная информация:
                        <ul>
                            <li>Адрес: 000000, Ставропольский край, Предгорный район, ст-ца Бекешевская, ул. Московская, 9 (<a href="https://maps.yandex.ru/?text=00.000000,00.000000" target="_blank">Показать на карте</a>)</li>
                            <li>Телефон: +7 87961 4-12-05</li>
                            <li>Электроная почта: </li>
                            <li>Официальный сайт: </li>
                        </ul>
                        </li>
                    </ul>
                    </li>
                </ul>
                </li>
                <li>Полное наименование: Управление имущественных отношений и муниципального контроля администрации Предгорного муниципального района Ставропольского края</li>
                <li>Краткое наименование: УИОиМК АПМР СК</li>
                <li>Руководитель: Рзаев Эмиль Камалович</li>
                <li>Контактная информация:
                <ul>
                    <li>Адрес: 357350, Ставропольский край, Предгорный район, ст-ца Ессентукская, ул. Набережная, 5 (<a href="https://maps.yandex.ru/?text=44.031873,42.875122" target="_blank">Показать на карте</a>)</li>
                    <li>Телефон: +7 87961 5-17-90</li>
                    <li>Электроная почта: <a href="mailto:uiizo_apmr_sk@mail.ru">uiizo_apmr_sk@mail.ru</a></li>
                    <li>Официальный сайт: </li>
                </ul>
                </li>
            </ul>
            </li>
        </ul>
-->
	</body>

</html>